document.addEventListener("DOMContentLoaded",()=>{chrome.storage.sync.get(["org","repo","token","folderName"],e=>{document.getElementById("org").value=e.org||"",document.getElementById("repo").value=e.repo||"",document.getElementById("token").value=e.token||"",document.getElementById("folderName").value=e.folderName||""}),document.getElementById("syncButton").addEventListener("click",async()=>{const e=document.getElementById("org").value,t=document.getElementById("repo").value,n=document.getElementById("token").value,o=document.getElementById("folderName").value;chrome.storage.sync.set({org:e,repo:t,token:n,folderName:o});const r=document.getElementById("status");r.innerHTML='<span id="loading-icon" style="display:inline-block;width:20px;height:20px;"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" stroke="#888" stroke-width="5" fill="none" stroke-dasharray="31.4 31.4" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="1s" repeatCount="indefinite"/></circle></svg></span>Syncing...',chrome.runtime.sendMessage({action:"startSync",org:e,repo:t,token:n,folderName:o},e=>{r.innerHTML=e.message})})});